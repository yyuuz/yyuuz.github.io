<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://yyuuz.github.io</id>
    <title></title>
    <subtitle>In a champagne supernova in the sky</subtitle>
    <icon>https://yyuuz.github.io/assets/favicon.ico</icon>
    <link href="https://yyuuz.github.io" />
    <author>
      <name>GuitarYui</name>
    </author>
    <updated>2024-08-08T16:00:00.000Z</updated>
    <entry>
        <id>https://yyuuz.github.io/2024/08/09/ANNS/CXL-ANNS/</id>
        <title>CXL-ANNS</title>
        <link rel="alternate" href="https://yyuuz.github.io/2024/08/09/ANNS/CXL-ANNS/"/>
        <content type="html">&lt;p&gt;CXL-ANNS: Software-Hardware Collaborative Memory Disaggregation and Computation for Billion-Scale Approximate Nearest Neighbor Search&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç¼©ç•¥è¯&lt;/th&gt;
&lt;th&gt;é‡Šä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;BI&lt;/td&gt;
&lt;td&gt;Back Invalidation&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;DPA&lt;/td&gt;
&lt;td&gt;Device Physical Addressï¼Œè®¾å¤‡ç‰©ç†åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;DSP&lt;/td&gt;
&lt;td&gt;Downstream Switch Portï¼ŒSwitch çš„ä¸‹è¡Œç«¯å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;eRCD&lt;/td&gt;
&lt;td&gt;Exclusive Restricted CXL Deviceï¼Œåªæ”¯æŒ CXL 1.1 çš„ CXL Device&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HDM&lt;/td&gt;
&lt;td&gt;Host-managed Device Memoryï¼Œç”± Host ç®¡ç†çš„ Device Memory&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HPA&lt;/td&gt;
&lt;td&gt;Host Physical Addressï¼Œä¸»æœºç‰©ç†åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;IG&lt;/td&gt;
&lt;td&gt;Interleave Granularityï¼Œäº¤ç»‡ç²’åº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;IW&lt;/td&gt;
&lt;td&gt;Interleave Wayï¼Œäº¤ç»‡è·¯æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RP&lt;/td&gt;
&lt;td&gt;Root Portï¼Œæ ¹èŠ‚ç‚¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;UIO&lt;/td&gt;
&lt;td&gt;Unordered Input/Outputï¼Œæ— åº IO&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;USP&lt;/td&gt;
&lt;td&gt;Upstream Switch Portï¼ŒSwitch çš„ä¸Šè¡Œç«¯å£&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;introduction&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#introduction&#34;&gt;#&lt;/a&gt; Introduction&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240809123737.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ä¸åŒçš„è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ï¼ˆANNSï¼‰ç³»ç»Ÿåœ¨ä¸‰ä¸ªå…³é”®ç»´åº¦ä¸Šçš„æ€§èƒ½å¯¹æ¯”ï¼š&lt;strong&gt;å¯æ‰©å±•æ€§ï¼ˆScalabilityï¼‰&lt;/strong&gt;ã€&lt;strong&gt;æ€§èƒ½ï¼ˆPerformanceï¼‰&lt;/strong&gt; å’Œ &lt;strong&gt;å‡†ç¡®æ€§ï¼ˆAccuracyï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å¯æ‰©å±•æ€§ï¼ˆScalabilityï¼‰&lt;/strong&gt;ï¼šæŒ‡ç³»ç»Ÿå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†çš„èƒ½åŠ›ã€‚å›¾ä¸­çš„å¯æ‰©å±•æ€§ç»´åº¦è¡¨ç¤ºäº†ç³»ç»Ÿåœ¨å¤„ç†å¤§è§„æ¨¡ ANNS ä»»åŠ¡æ—¶çš„æœ‰æ•ˆæ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½ï¼ˆPerformanceï¼‰&lt;/strong&gt;ï¼šæŒ‡ç³»ç»Ÿæ‰§è¡Œ ANNS ä»»åŠ¡çš„é€Ÿåº¦å’Œæ•ˆç‡ã€‚å›¾ä¸­çš„æ€§èƒ½ç»´åº¦è¡¨ç¤ºäº†ç³»ç»Ÿåœ¨å®é™…æ“ä½œä¸­çš„æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‡†ç¡®æ€§ï¼ˆAccuracyï¼‰&lt;/strong&gt;ï¼šæŒ‡ ANNS ä»»åŠ¡çš„å‡†ç¡®åº¦ï¼Œå›¾ä¸­çš„å‡†ç¡®æ€§ç»´åº¦è¡¨ç¤ºäº†ç³»ç»Ÿåœ¨æŸ¥è¯¢ç»“æœä¸Šçš„ç²¾åº¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å›¾ 1 (a): ä»¥å‰çš„ç ”ç©¶&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Oracle&lt;/strong&gt;ï¼šä»£è¡¨ç†æƒ³åŒ–çš„åŸºå‡†ç³»ç»Ÿï¼Œå…·æœ‰æœ€ä¼˜çš„å¯æ‰©å±•æ€§ã€æ€§èƒ½å’Œå‡†ç¡®æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Hierarchicalï¼ˆåˆ†å±‚å­˜å‚¨ï¼‰&lt;/strong&gt;ï¼šé€šè¿‡åˆ†å±‚å­˜å‚¨æŠ€æœ¯æ¥å¤„ç†å¤§è§„æ¨¡æ•°æ®ï¼Œä½†åœ¨æŸäº›ç»´åº¦ä¸Šå¯èƒ½æœ‰æ‰€ç‰ºç‰²ï¼ˆä¾‹å¦‚ï¼Œå¯èƒ½åœ¨æ€§èƒ½æˆ–å‡†ç¡®æ€§ä¸Šæœ‰æ‰€ä¸‹é™ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Compressionï¼ˆå‹ç¼©ï¼‰&lt;/strong&gt;ï¼šä½¿ç”¨æ•°æ®å‹ç¼©æ–¹æ³•æ¥æé«˜å†…å­˜åˆ©ç”¨ç‡ï¼Œä½†å¯èƒ½ä¼šå½±å“æ•°æ®çš„å‡†ç¡®æ€§å’Œæ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å›¾ 1 (b): åŸºäº CXL çš„æ–¹æ³•&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;CXL&lt;/strong&gt;ï¼šè¡¨ç¤ºåŸºäº Compute Express Linkï¼ˆCXLï¼‰æŠ€æœ¯çš„ ANNS ç³»ç»Ÿï¼Œå±•ç¤ºäº†åœ¨å¯æ‰©å±•æ€§å’Œæ€§èƒ½ä¸Šçš„æ˜¾è‘—æ”¹è¿›ï¼ŒåŒæ—¶ä¿æŒè¾ƒé«˜çš„å‡†ç¡®æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;CXL-ANNS&lt;/strong&gt;ï¼šè®ºæ–‡ä¸­æå‡ºçš„ç³»ç»Ÿï¼Œåˆ©ç”¨ CXL æŠ€æœ¯çš„ä¼˜åŠ¿ï¼Œé€šè¿‡è½¯ç¡¬ä»¶ååŒä¼˜åŒ–ï¼Œåœ¨å¯æ‰©å±•æ€§ã€æ€§èƒ½å’Œå‡†ç¡®æ€§ä¸‰ä¸ªç»´åº¦ä¸Šå‡è¡¨ç°å‡ºè‰²ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;è´¡çŒ®&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è´¡çŒ®&#34;&gt;#&lt;/a&gt; è´¡çŒ®&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…³ç³»æ„ŸçŸ¥å›¾ç¼“å­˜&lt;/strong&gt;ï¼šé€‰æ‹©æ€§åœ°å°†å›¾å’Œç‰¹å¾å‘é‡æ”¾ç½®åœ¨ CXL å†…å­˜ç½‘ç»œçš„ä¸åŒä½ç½®ã€‚å…·ä½“è€Œè¨€ï¼ŒCXL-ANNS å°†èŠ‚ç‚¹ä¿¡æ¯åˆ†é…åˆ°é è¿‘å…¥å£èŠ‚ç‚¹çš„æœ¬åœ°é™„åŠ  DRAM ä¸­ï¼Œè€Œå°†å…¶ä»–æ•°æ®é›†æ”¾ç½®åœ¨ CXL å†…å­˜æ± ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éšè— CXL å†…å­˜æ± çš„å»¶è¿Ÿ&lt;/strong&gt;ï¼šæå‡ºäº†ä¸€ç§ç®€å•çš„é¢„è§æŠ€æœ¯ï¼Œåˆ©ç”¨ ANNS ç‹¬ç‰¹çš„å›¾éå†ç‰¹æ€§ï¼Œåœ¨å½“å‰ kNN å€™é€‰æ›´æ–°é˜¶æ®µé¢„å–ä¸‹ä¸€ä¸ªé‚»å±…çš„æ•°æ®é›†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;CXL ä¸­çš„åä½œ kNN æœç´¢è®¾è®¡&lt;/strong&gt;ï¼šEP æ§åˆ¶å™¨æ¥è®¡ç®—è·ç¦»ï¼Œå›¾éå†å’Œå€™é€‰æ›´æ–°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‡å°‘ä¾èµ–ä¸è°ƒåº¦&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;è®¾è®¡&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è®¾è®¡&#34;&gt;#&lt;/a&gt; è®¾è®¡&lt;/h1&gt;
&lt;h2 id=&#34;èŠ‚ç‚¹çº§å…³ç³»&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#èŠ‚ç‚¹çº§å…³ç³»&#34;&gt;#&lt;/a&gt; èŠ‚ç‚¹çº§å…³ç³»&lt;/h2&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240809123755.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;å°† enterpoint çš„ 2~3 è·³å›¾å’ŒèŠ‚ç‚¹æ•°æ®æ”¾å…¥ DRAM, å…¶ä½™å­˜å…¥ CXL EPs&lt;/p&gt;
&lt;h2 id=&#34;è·ç¦»è®¡ç®—&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è·ç¦»è®¡ç®—&#34;&gt;#&lt;/a&gt; è·ç¦»è®¡ç®—&lt;/h2&gt;
&lt;h2 id=&#34;å‡å°‘æ•°æ®ä¼ è¾“&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å‡å°‘æ•°æ®ä¼ è¾“&#34;&gt;#&lt;/a&gt; å‡å°‘æ•°æ®ä¼ è¾“&lt;/h2&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240809123805.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;CXL EP åªä¼ è¾“è®¡ç®—åçš„è·ç¦»&lt;/p&gt;
&lt;h2 id=&#34;cxlannsæ¶æ„&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#cxlannsæ¶æ„&#34;&gt;#&lt;/a&gt; CXLANNS æ¶æ„&lt;/h2&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240809123816.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;CXLANNS æ¶æ„çš„é«˜å±‚æ¬¡è§†å›¾ï¼Œä¸»è¦ç”± i) RC ç«¯è½¯ä»¶æ ˆå’Œ ii) EP ç«¯æ•°æ®å¤„ç†ç¡¬ä»¶æ ˆæ„æˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;rcç«¯è½¯ä»¶æ ˆ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#rcç«¯è½¯ä»¶æ ˆ&#34;&gt;#&lt;/a&gt; RC ç«¯è½¯ä»¶æ ˆ&lt;/h3&gt;
&lt;p&gt;æ­¤ RC ç«¯è½¯ä»¶æ ˆç”± i) æŸ¥è¯¢è°ƒåº¦ç¨‹åºã€ii) æ± ç®¡ç†å™¨å’Œ iii) å†…æ ¸é©±åŠ¨ç¨‹åºç»„æˆã€‚åœ¨ CXL-ANNS çš„é¡¶éƒ¨ï¼ŒæŸ¥è¯¢è°ƒåº¦ç¨‹åºå¤„ç†æ¥è‡ªå…¶åº”ç”¨ç¨‹åºï¼ˆå¦‚æ¨èç³»ç»Ÿï¼‰çš„æ‰€æœ‰ kNN æœç´¢è¯·æ±‚ã€‚å®ƒå°†æ¯ä¸ªæŸ¥è¯¢æ‹†åˆ†ä¸ºä¸‰ä¸ªå­ä»»åŠ¡ï¼ˆå›¾éå†ã€è·ç¦»è®¡ç®—å’Œå€™é€‰æ›´æ–°ï¼‰ï¼Œå¹¶åœ¨ä¸åŒçš„ä½ç½®åˆ†é…è¿™äº›ä»»åŠ¡ã€‚å…·ä½“è€Œè¨€ï¼Œå›¾éå†å’Œå€™é€‰æ›´æ–°å­ä»»åŠ¡åœ¨ CXL CPU ç«¯æ‰§è¡Œï¼Œè€Œè°ƒåº¦ç¨‹åºé€šè¿‡ä¸åº•å±‚æ± ç®¡ç†å™¨åä½œå°†è·ç¦»è®¡ç®—åˆ†é…ç»™åº•å±‚ EPã€‚æ± ç®¡ç†å™¨å¤„ç† CXL çš„ HPAï¼Œä»¥è€ƒè™‘å›¾å½¢å’Œæ•°æ®å‘é‡çš„è¾¹ç¼˜è·³æ•°ï¼Œä»è€Œå¯ä»¥æ ¹æ®èŠ‚ç‚¹çº§å…³ç³»åŒºåˆ†å›¾å½¢è®¿é—®ã€‚æœ€åï¼Œå†…æ ¸é©±åŠ¨ç¨‹åºç®¡ç†åº•å±‚ EP åŠå…¶åœ°å€ç©ºé—´ï¼›å®ƒæšä¸¾ EP å¹¶å°†å…¶ HDM æ˜ å°„åˆ°ç³»ç»Ÿå†…å­˜çš„ HPA ä¸­ï¼Œä¾›æ± ç®¡ç†å™¨ä½¿ç”¨ã€‚ç”±äºå¯¹ HPA çš„æ‰€æœ‰å†…å­˜è¯·æ±‚éƒ½åœ¨ CXL CPU ä¸­ç¼“å­˜ï¼Œé©±åŠ¨ç¨‹åºä½¿ç”¨ CXL.io è€Œä¸æ˜¯ CXL.mem å°† EP ç«¯æ¥å£å¯„å­˜å™¨æ˜ å°„åˆ° RC çš„ PCIe åœ°å€ç©ºé—´ã€‚è¯·æ³¨æ„ï¼Œç”±äºå­˜åœ¨å†…å­˜æ˜ å°„å¯„å­˜å™¨çš„ PCIe ç©ºé—´æ˜¯åœ¨éç¼“å­˜åŒºåŸŸï¼Œåº•å±‚ EP å¯ä»¥ç«‹å³è¯†åˆ«ä¸»æœºç«¯åº”ç”¨ç¨‹åºè®© EP çŸ¥é“çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240809123825.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;h4 id=&#34;å›¾å½¢æ„å»ºç”¨äºæœ¬åœ°ç¼“å­˜&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å›¾å½¢æ„å»ºç”¨äºæœ¬åœ°ç¼“å­˜&#34;&gt;#&lt;/a&gt; å›¾å½¢æ„å»ºç”¨äºæœ¬åœ°ç¼“å­˜&lt;/h4&gt;
&lt;p&gt;å½“æ± ç®¡ç†å™¨å°†å¤§éƒ¨åˆ†å›¾æ•°æ®å’Œæ‰€æœ‰æ•°æ®å‘é‡åˆ†é…ç»™åº•å±‚çš„ CXL å†…å­˜æ± æ—¶ï¼Œå®ƒä¼šå°†é¢„è®¡æœ€å¸¸è®¿é—®çš„èŠ‚ç‚¹åœ¨æœ¬åœ° DRAM ä¸­ç¼“å­˜ï¼Œå°½å¯èƒ½åœ°åˆ©ç”¨ç³»ç»Ÿå†…å­˜å®¹é‡ã€‚ä¸ºæ­¤ï¼Œæ± ç®¡ç†å™¨è€ƒè™‘ä»å›ºå®šçš„å…¥å£èŠ‚ç‚¹åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„è¾¹ç¼˜è·³æ•°ï¼ˆå³ï¼Œè®¡ç®—è¾¹ç¼˜è·³æ•°ï¼‰ä»¥ç”¨äºå…¶å…³ç³»æ„ŸçŸ¥å›¾ç¼“å­˜ã€‚å›¾ 13 è¯´æ˜äº†æ± ç®¡ç†å™¨å¦‚ä½•å°†ç»™å®šå›¾ä¸­çš„èŠ‚ç‚¹åˆ†é…åˆ°ä¸åŒçš„ä½ç½®ï¼ˆæœ¬åœ°å†…å­˜ä¸ CXL å†…å­˜æ± ï¼‰ã€‚åœ¨æ„å»ºå›¾æ—¶ï¼Œæ± ç®¡ç†å™¨åˆ©ç”¨ [[å•æºæœ€çŸ­è·¯å¾„ï¼ˆSSSPï¼‰]] ç®—æ³•è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„è·³æ•°ï¼›å®ƒé¦–å…ˆè®©å›¾ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹å…·æœ‰è´Ÿè·³æ•°ï¼ˆä¾‹å¦‚ï¼Œ-1ï¼‰ã€‚ä»å…¥å£èŠ‚ç‚¹å¼€å§‹ï¼Œæ± ç®¡ç†å™¨æ£€æŸ¥ä¸€ä¸ªè¾¹ç¼˜è·³ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹å¹¶å¢åŠ å…¶è·³æ•°ã€‚å®ƒè®¿é—®æ¯ä¸ªèŠ‚ç‚¹å¹¶å¯¹å…¶è¿­ä»£æ­¤è¿‡ç¨‹ï¼Œç›´åˆ°æ²¡æœ‰èŠ‚ç‚¹å¯åœ¨å¹¿åº¦ä¼˜å…ˆæœç´¢çš„æ–¹å¼ä¸­è®¿é—®ã€‚ä¸€æ—¦æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰è‡ªå·±çš„è·³æ•°ï¼Œæ± ç®¡ç†å™¨æ ¹æ®è·³æ•°å‡åºå¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œå¹¶å°†èŠ‚ç‚¹ä»é¡¶éƒ¨ï¼ˆå…·æœ‰æœ€å°è·³æ•°ï¼‰åˆ†é…åˆ°æœ¬åœ° DRAM ä¸­ï¼Œå°½å¯èƒ½å¤šåœ°è¿›è¡Œåˆ†é…ã€‚æœ¬åœ° DRAM çš„å¯ç”¨å¤§å°å¯ä»¥é€šè¿‡å‚è€ƒç³»ç»Ÿé…ç½®å˜é‡ï¼ˆsysconf ()ï¼‰ä¸­çš„æ€»é¡µæ•°ï¼ˆSC_AVPHYS_PAGESï¼‰å’Œæ¯é¡µçš„å¤§å°ï¼ˆSC_PAGESIZEï¼‰ç®€å•ä¼°ç®—ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨æœ¬ç ”ç©¶ä¸­ï¼Œæ± ç®¡ç†å™¨åœ¨ç”¨æˆ·ç©ºé—´ä¸­ä½¿ç”¨å¤šä¸ªçº¿ç¨‹æ‰§è¡Œ SSSPï¼Œæ—¨åœ¨å‡å°‘æ„å»ºæ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240809123836.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;h4 id=&#34;æ± ç®¡ç†å¯¹äºå‘é‡å›¾&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ± ç®¡ç†å¯¹äºå‘é‡å›¾&#34;&gt;#&lt;/a&gt; æ± ç®¡ç†å¯¹äºå‘é‡ / å›¾&lt;/h4&gt;
&lt;p&gt;åœ¨ CXL arenas ä¸­ï¼ŒCXL EP çš„åº•å±‚ HDM ç›´æ¥æš´éœ²ç»™ç”¨æˆ·çº§ç©ºé—´ï¼Œå› æ­¤éœ€è¦å¾ˆå¥½åœ°ç®¡ç†ä»¥é€‚åº”æ‰€æœ‰åäº¿ç‚¹æ•°æ®é›†çš„å†…å­˜ä½¿ç”¨è¡Œä¸ºã€‚æ± ç®¡ç†å™¨è€ƒè™‘åˆ°æ•°æ®é›†çš„ä¸¤ä¸ªæ–¹é¢ï¼›æ•°æ®å‘é‡ï¼ˆå³åµŒå…¥è¡¨ï¼‰åº”ä½äºä¸€ä¸ªç›¸å½“å¤§ä¸”è¿ç»­çš„å†…å­˜ç©ºé—´ä¸­ï¼Œè€Œå›¾ç»“æ„éœ€è¦å¤„ç†è®¸å¤šé•¿åº¦å¯å˜çš„é‚»å±…åˆ—è¡¨ï¼ˆ16Bâˆ¼1KBï¼‰ã€‚æ± ç®¡ç†å™¨é‡‡ç”¨ç±»æ ˆå’Œä¼™ä¼´å¼å†…å­˜åˆ†é…å™¨ï¼Œåˆ†åˆ«åœ¨æ¯ä¸ª CXL arenas ä¸­å‘ä¸Šå’Œå‘ä¸‹å¢é•¿ã€‚å‰è€…åˆ†é…å™¨å…·æœ‰ä¸€ä¸ªèŒƒå›´æŒ‡é’ˆï¼Œå¹¶ç®¡ç†åµŒå…¥è¡¨çš„å†…å­˜ï¼Œç±»ä¼¼äºæ ˆã€‚&lt;strong&gt;æ± ç®¡ç†å™¨åœ¨å¤šä¸ª CXL arenas ä»¥è½®è¯¢æ–¹å¼åˆ†é…æ•°æ®å‘é‡&lt;/strong&gt;ï¼Œ[[#^ac83ec | å‘é‡åˆ†ç‰‡]]ã€‚ç›¸åï¼Œä¼™ä¼´å¼åˆ†é…å™¨é‡‡ç”¨çº§åˆ«æŒ‡é’ˆï¼Œæ¯ä¸ªçº§åˆ«ç”±ä¸€ä¸ªé“¾è¡¨ç»„æˆï¼Œè¯¥é“¾è¡¨è¿æ¥ä¸åŒå¤§å°çš„æ•°æ®å—ï¼ˆä» 16B åˆ° 1KBï¼‰ã€‚åƒ Linux ä¼™ä¼´å†…å­˜ç®¡ç†å™¨ä¸€æ ·ï¼Œå®ƒæ ¹æ®æ¯ä¸ªé‚»å±…åˆ—è¡¨çš„ç¡®åˆ‡éœ€æ±‚åˆ†é… CXL å†…å­˜ç©ºé—´ï¼Œå¹¶æ ¹æ®å·¥ä½œè´Ÿè½½è¡Œä¸ºåˆå¹¶ / æ‹†åˆ†å—ã€‚ä¸ºäº†ä½¿æ¯ä¸ª EP ä¿æŒå¹³è¡¡ï¼Œæ± &lt;strong&gt;ç®¡ç†å™¨ä»¥è½®è¯¢æ–¹å¼è·¨ä¸åŒ CXL arenas åˆ†é…æ¯è·³çš„é‚»å±…åˆ—è¡¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ„æ€æ˜¯ figure 13 ç¬¬ä¸‰æ­¥å—ï¼Œä½†åé¢åˆè¯´æ˜¯æŠŠæ¯ä¸ªå‘é‡çš„ä¸åŒéƒ¨åˆ†å­˜åœ¨ EP ä¸­&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;epç«¯ç¡¬ä»¶æ ˆ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#epç«¯ç¡¬ä»¶æ ˆ&#34;&gt;#&lt;/a&gt; EP ç«¯ç¡¬ä»¶æ ˆ&lt;/h3&gt;
&lt;p&gt;EP ç«¯ç¡¬ä»¶å †æ ˆåŒ…æ‹¬ä¸€ä¸ªç”¨äºè·ç¦»è®¡ç®—çš„é¢†åŸŸç‰¹å®šåŠ é€Ÿå™¨ï¼ˆDSAï¼‰ï¼Œä»¥åŠæ„å»ºåŸºäº CXL çš„å†…å­˜æ‰©å±•å™¨æ‰€éœ€çš„æ‰€æœ‰åŸºæœ¬ç¡¬ä»¶ç»„ä»¶ã€‚åœ¨æˆ‘ä»¬çš„ EP å‰ç«¯ï¼Œå®ç°äº†ç‰©ç†å±‚ï¼ˆPHYï¼‰æ§åˆ¶å™¨å’Œ CXL å¼•æ“ï¼Œå®ƒä»¬åˆ†åˆ«è´Ÿè´£ PCIe/CXL é€šä¿¡æ§åˆ¶å’Œçªå‘åˆ°å†…å­˜è¯·æ±‚çš„è½¬æ¢ã€‚è½¬æ¢åçš„å†…å­˜è¯·æ±‚è¢«è½¬å‘åˆ°åº•å±‚å†…å­˜æ§åˆ¶å™¨ï¼Œè¯¥æ§åˆ¶å™¨è¿æ¥å…¶åç«¯çš„å¤šä¸ª DRAM æ¨¡å—ï¼›åœ¨æˆ‘ä»¬çš„åŸå‹ä¸­ï¼Œä¸€ä¸ª EP æœ‰å››ä¸ªå†…å­˜æ§åˆ¶å™¨ï¼Œæ¯ä¸ªæ§åˆ¶å™¨éƒ½æœ‰ä¸€ä¸ª 256GB DRAM æ¨¡å—çš„ DIMM é€šé“ã€‚å¦ä¸€æ–¹é¢ï¼ŒDSA ä½äº CXL å¼•æ“å’Œå†…å­˜æ§åˆ¶å™¨ä¹‹é—´ã€‚å®ƒå¯ä»¥ä½¿ç”¨å†…å­˜æ§åˆ¶å™¨è¯»å–æ•°æ®å‘é‡ï¼ŒåŒæ—¶é€šè¿‡ CXL å¼•æ“çš„æ¥å£å¯„å­˜å™¨æ£€æŸ¥æ“ä½œå‘½ä»¤ã€‚è¿™äº›æ¥å£å¯„å­˜å™¨è¢«æ˜ å°„åˆ°ä¸»æœºçš„éç¼“å­˜ PCIe ç©ºé—´ï¼Œä»¥ä¾¿ä¸»æœºå†™å…¥çš„æ‰€æœ‰å‘½ä»¤å¯ä»¥ç«‹å³å¯¹ DSA å¯è§ã€‚DSA ä½¿ç”¨å¤šä¸ªå¤„ç†å…ƒç´ ï¼ˆPEï¼‰è®¡ç®—å¤šä¸ªæ•°æ®å‘é‡çš„è¿‘ä¼¼è·ç¦»ï¼Œæ¯ä¸ªå¤„ç†å…ƒç´ å…·æœ‰ç®€å•çš„ç®—æœ¯å•å…ƒï¼Œå¦‚åŠ æ³•å™¨ / å‡æ³•å™¨å’Œä¹˜æ³•å™¨ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åä½œæŸ¥è¯¢æœåŠ¡åŠ é€Ÿ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#åä½œæŸ¥è¯¢æœåŠ¡åŠ é€Ÿ&#34;&gt;#&lt;/a&gt; åä½œæŸ¥è¯¢æœåŠ¡åŠ é€Ÿ&lt;/h4&gt;
&lt;h5 id=&#34;è·ç¦»è®¡ç®—åŠ é€Ÿ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è·ç¦»è®¡ç®—åŠ é€Ÿ&#34;&gt;#&lt;/a&gt; è·ç¦»è®¡ç®—åŠ é€Ÿ&lt;/h5&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240809123850.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸ª EP æœ‰è®¸å¤š processing element (PE)ï¼Œåœ¨è®ºæ–‡ä¸­çš„åŸå‹ä¸­ä¸º 10 ä¸ªã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‘é‡åˆ†ç‰‡&lt;/strong&gt;ã€‚å¦‚æœæˆ‘ä»¬ä» EP çš„èµ·å§‹åœ°å€ä»¥è¿ç»­çš„é¡ºåºå®šä½åµŒå…¥è¡¨ï¼ŒEP çš„åç«¯ DRAM å¸¦å®½å¯èƒ½åœ¨æˆ‘ä»¬çš„è®¾è®¡ä¸­æˆä¸ºç“¶é¢ˆã€‚è¿™æ˜¯å› ä¸ºåµŒå…¥è¡¨ä¸­çš„æ¯ä¸ªç‰¹å¾å‘é‡éƒ½æ˜¯ç”±é«˜ç»´ä¿¡æ¯ç¼–ç çš„ï¼ˆçº¦ 256 ç»´ï¼Œçº¦å  1KBï¼‰ã€‚ï¼ˆæ„æ€æ˜¯æ¯ä¸ª EP çš„ DRAM å¸¦å®½è¿ä¸€ä¸ªå‘é‡éƒ½å–ä¸å‡ºæ¥ï¼Ÿï¼‰ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„æ± ç®¡ç†å™¨æŒ‰åˆ—å¯¹åµŒå…¥è¡¨è¿›è¡Œåˆ†ç‰‡ï¼Œå¹¶å°†è¡¨çš„ä¸åŒéƒ¨åˆ†å­˜å‚¨åœ¨ä¸åŒçš„ EP ä¸­ã€‚å¦‚å›¾ 15b æ‰€ç¤ºï¼Œè¿™ç§å‘é‡åˆ†ç‰‡æ ¹æ®æ¯ä¸ª EP çš„ I/O ç²’åº¦ï¼ˆ256Bï¼‰å°†æ¯ä¸ªå‘é‡åˆ†å‰²æˆå¤šä¸ªå­å‘é‡ã€‚æ¯ä¸ª EP åŒæ—¶è®¡ç®—å…¶æ‰€å®¹çº³çš„åˆ†å‰²æ•°æ®å‘é‡çš„å­è·ç¦»ã€‚éšåï¼ŒCXL CPU ç´¯åŠ å­è·ç¦»ä»¥è·å¾—æœ€ç»ˆçš„è·ç¦»å€¼ã€‚ ^ac83ec&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸ EP çº§åŠ é€Ÿçš„æ¥å£&lt;/strong&gt;ã€‚æ¥å£å¯„å­˜å™¨ä»…å¤„ç†å‘½ä»¤åˆ°è¾¾çš„äº‹ä»¶ï¼Œç§°ä¸ºé—¨é“ƒï¼Œè€Œæ¯ä¸ª EP çš„ CXL å¼•æ“ä»¥ä¸»åŠ¨æ–¹å¼ä» CPU ä¾§æœ¬åœ° DRAMï¼ˆç§°ä¸ºå‘½ä»¤ç¼“å†²åŒºï¼‰ä¸­è·å–ç›¸åº”çš„æ“ä½œç±»å‹å’Œé‚»å±…åˆ—è¡¨ã€‚CXL å¼•æ“è¿˜å°†è·ç¦»è®¡ç®—çš„ç»“æœæ¨é€åˆ°æœ¬åœ° DRAMï¼Œä»¥ä¾¿ RC ä¾§è½¯ä»¶å¯ä»¥ç›´æ¥è®¿é—®ç»“æœï¼Œè€Œæ— éœ€è®¿é—®åº•å±‚ CXL å†…å­˜æ± ã€‚&lt;/p&gt;
&lt;h5 id=&#34;cxlå†…å­˜æ± çš„é¢„å–&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#cxlå†…å­˜æ± çš„é¢„å–&#34;&gt;#&lt;/a&gt; CXL å†…å­˜æ± çš„é¢„å–&lt;/h5&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808131540.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Graph read: cxlä¾§è®¿é—®é‚»å±…è¡¨ä¼ ç»™cpu
Graph trav: cpuå°†è¦è®¡ç®—çš„é‚»å±…èŠ‚ç‚¹ä¼ ç»™cxl
Dist calc:epè®¡ç®—è·ç¦»ä¼ ç»™cpu
Cand update:cpuç´¯åŠ å­è·ç¦»å¹¶æ’åºæ›´æ–°
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å›¾ 17a å±•ç¤ºäº†æˆ‘ä»¬åä½œæŸ¥è¯¢æœåŠ¡åŠ é€Ÿçš„åŸºçº¿ï¼Œè¿™è®© EP èƒ½å¤Ÿåœ¨ ANNS çš„å›¾éå†å’Œå€™é€‰æ›´æ–°ï¼ˆåŒ…æ‹¬å­è·ç¦»ç´¯ç§¯ï¼‰åœ¨ CPU ä¾§å¤„ç†æ—¶è®¡ç®—å­è·ç¦»ã€‚è¯¥è°ƒåº¦æ¨¡å¼ä¼šä¸æ–­è¿­ä»£ï¼Œç›´åˆ°æ²¡æœ‰æ›´å¤šçš„ kNN å€™é€‰éœ€è¦è®¿é—®ï¼ˆç®—æ³• 1ï¼‰ã€‚è¿™ç§åŸºçº¿æ–¹æ³•çš„æŒ‘æˆ˜åœ¨äºï¼Œä¸€æ—¦ CPU ä¾§æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯å‡†å¤‡å°±ç»ªï¼Œæ‰å¯ä»¥å¼€å§‹å›¾éå†ã€‚è™½ç„¶æˆ‘ä»¬çš„æ± ç®¡ç†å™¨çš„æœ¬åœ°ç¼“å­˜è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†å…¶æ€§èƒ½ä»ç„¶æœ‰é™ã€‚éœ€è¦é€šè¿‡ CXL å†…å­˜æ± è·å–èŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹å¹¶ä¸ä½äºæœ€å†…å±‚çš„è¾¹ç¼˜è·³è·ƒä¸­ã€‚ç”±äºè®¿é—®åº•å±‚å†…å­˜æ± çš„å»¶è¿Ÿè¾ƒé•¿ï¼Œå›¾éå†å¯ä»¥ç›¸å¯¹è¢«æ¨è¿Ÿã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬çš„æŸ¥è¯¢è°ƒåº¦å™¨åœ¨å®é™…éå†å­ä»»åŠ¡éœ€è¦ä¹‹å‰æ›´æ—©åœ°é¢„å–å›¾ä¿¡æ¯ï¼Œå¦‚å›¾ 17b æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢è°ƒåº¦å™¨&lt;/strong&gt;é¢„æµ‹è¦è®¿é—®çš„èŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡å‚è€ƒå€™é€‰æ•°ç»„æ¥è·å–å…¶é‚»å±…ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ€»è®¿é—®èŠ‚ç‚¹ä¸­æœ‰ 82.3% æ¥è‡ªå€™é€‰æ•°ç»„ã€‚æ„æ€å°±æ˜¯å–ä¼˜å…ˆé˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªï¼Ÿ&lt;/p&gt;
&lt;h5 id=&#34;ç»†ç²’åº¦æŸ¥è¯¢è°ƒåº¦&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ç»†ç²’åº¦æŸ¥è¯¢è°ƒåº¦&#34;&gt;#&lt;/a&gt; ç»†ç²’åº¦æŸ¥è¯¢è°ƒåº¦&lt;/h5&gt;
&lt;p&gt;RC-CPU åœ¨ EP è·ç¦»è®¡ç®—æ—¶è¿˜æ˜¯æ²¡äº‹å¹²ï¼Œäºæ˜¯ &lt;code&gt;Cand update&lt;/code&gt;  æ—¶å…ˆè¿›è¡ŒèŠ‚ç‚¹é€‰æ‹©ä¼ ç»™ CXL å†è¿›è¡Œæ’å…¥å’Œæ’åºã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ä½†æ˜¯ä½ ä¸æ’åºæ€ä¹ˆé€‰æ‹©å‘¢ï¼Ÿä¸è¿˜æ˜¯é¢„æµ‹å—
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;å®éªŒåˆ†æ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å®éªŒåˆ†æ&#34;&gt;#&lt;/a&gt; å®éªŒåˆ†æ&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808182114.png&#34; alt=&#34;image.png&#34; /&gt;&lt;br /&gt;
 ä¸»è¦æå‡æ¥è‡ª DSA å’Œ cache (åŒ…æ‹¬é¢„å–)&lt;/p&gt;
&lt;h1 id=&#34;å‚è€ƒ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å‚è€ƒ&#34;&gt;#&lt;/a&gt; å‚è€ƒ&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://www.ctyun.cn/developer/article/464924478537797&#34;&gt;ATC2023 è®ºæ–‡åˆ†äº«ä¹‹ â€œCXL-ANNSâ€- å¤©ç¿¼äº‘å¼€å‘è€…ç¤¾åŒº - å¤©ç¿¼äº‘ (ctyun.cn)&lt;/a&gt;&lt;/p&gt;
</content>
        <category term="ANNS" scheme="https://yyuuz.github.io/categories/ANNS/" />
        <category term="CXL" scheme="https://yyuuz.github.io/tags/CXL/" />
        <category term="ANNS/æœç´¢" scheme="https://yyuuz.github.io/tags/ANNS-%E6%90%9C%E7%B4%A2/" />
        <updated>2024-08-08T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>https://yyuuz.github.io/2024/08/09/ANNS/%E5%9F%BA%E4%BA%8E%E5%9B%BE%E7%9A%84ANNS%E6%9E%84%E5%BB%BA%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/</id>
        <title>åŸºäºå›¾çš„ANNSæ„å»ºç´¢å¼•ç›¸å…³</title>
        <link rel="alternate" href="https://yyuuz.github.io/2024/08/09/ANNS/%E5%9F%BA%E4%BA%8E%E5%9B%BE%E7%9A%84ANNS%E6%9E%84%E5%BB%BA%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/"/>
        <content type="html">&lt;p&gt;åŸºç¡€çš„ç´¢å¼•æ„å»ºç®—æ³•&lt;/p&gt;
&lt;h1 id=&#34;knnå›¾&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#knnå›¾&#34;&gt;#&lt;/a&gt; KNN å›¾&lt;/h1&gt;
&lt;h2 id=&#34;nn-descent&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#nn-descent&#34;&gt;#&lt;/a&gt; &lt;a href=&#34;https://blog.csdn.net/whenever5225/article/details/105598694&#34;&gt;NN-Descent&lt;/a&gt;&lt;/h2&gt;
&lt;h2 id=&#34;nn-descentfull&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#nn-descentfull&#34;&gt;#&lt;/a&gt; &lt;a href=&#34;https://lsyhprum.github.io/2021/07/01/NN-Descent%E8%AE%BA%E6%96%87%E6%B5%85%E6%9E%90/&#34;&gt;NN-DescentFULL&lt;/a&gt;&lt;/h2&gt;
&lt;h1 id=&#34;nsw&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#nsw&#34;&gt;#&lt;/a&gt; NSW&lt;/h1&gt;
&lt;p&gt;æ‰¾åˆ°èŠ‚ç‚¹ğ‘£ğ‘–æœ€è¿‘é‚»çš„ ğ‘“ ä¸ªé‚»å±…ï¼Œå»ºç«‹ğ‘£ğ‘–å’Œè¿™äº›é‚»å±…çš„è¾¹è¿æ¥&lt;/p&gt;
&lt;h1 id=&#34;hnsw&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#hnsw&#34;&gt;#&lt;/a&gt; HNSW&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808230011.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ç¡®å®šä¸€ä¸ª I,p ä» 0 åˆ° I éƒ½ä¼šå‡ºç°&lt;br /&gt;
&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808230019.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€é˜¶æ®µï¼šä»é¡¶å±‚åˆ°ç¬¬ I+1 å±‚éå†ï¼Œef=1ï¼Œep = å”¯ä¸€æ‰¾åˆ°çš„ç‚¹ï¼›&lt;br /&gt;
 ç¬¬äºŒé˜¶æ®µï¼š&lt;br /&gt;
9. ä»ç¬¬ I å±‚åˆ° 0 å±‚éå†ï¼Œef,ep=w (ef ä¸ªæœ€è¿‘é‚»èŠ‚ç‚¹çš„é›†åˆ)&lt;br /&gt;
&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808230102.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;10.W é€‰ M ä¸ªèŠ‚ç‚¹äº q è¿æ¥ï¼Œä¸¤ç§æ–¹æ³•&lt;br /&gt;
&lt;strong&gt; SIMPLE&lt;/strong&gt; çš„ï¼š&lt;br /&gt;
&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808230111.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ç›´æ¥é€‰æœ€è¿‘çš„&lt;br /&gt;
&lt;strong&gt; HEURISTIC&lt;/strong&gt; çš„ï¼š&lt;br /&gt;
&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808230118.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;è¦è¿æ¥çš„ç‚¹ p1ï¼ˆp1ï¼Œq) è¦æ¯”ï¼ˆæ‰€æœ‰ï¼Ÿè¿˜æ˜¯åªéœ€ä¸€ä¸ªï¼Ÿåº”è¯¥æ˜¯æ‰€æœ‰ï¼‰åŸæœ‰çš„è¿æ¥ç‚¹ p2ï¼Œ(p1,p2) å°æ‰å…è®¸è¿æ¥ï¼Œï¼ˆp1ï¼Œq)&amp;lt;(p1,p2)&lt;br /&gt;
&lt;strong&gt; ä¸ºäº†åœ¨ä¸åŒæ–¹å‘ä¸Šé€‰æ‹©é‚»å±…ï¼Œä»è€Œé¿å…é‚»å±…æ‰å † â€œé«˜é€Ÿå…¬è·¯â€&lt;/strong&gt;&lt;br /&gt;
 æœ€åæ£€æŸ¥è¿æ¥çš„é‚»å±…ï¼Œç”¨ä¸Šé¢çš„ç®—æ³•ç¼©å‡å®ƒä»¬çš„é‚»å±…ä¸ªæ•°è‡³ Wmax&lt;/p&gt;
&lt;h1 id=&#34;gpu-accelerated-proximity-graph-approximate-nearest-neighbor-search-and-construction&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#gpu-accelerated-proximity-graph-approximate-nearest-neighbor-search-and-construction&#34;&gt;#&lt;/a&gt; GPU-accelerated Proximity Graph Approximate Nearest Neighbor Search and Construction&lt;/h1&gt;
&lt;h2 id=&#34;æ„å»ºnsgå›¾&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ„å»ºnsgå›¾&#34;&gt;#&lt;/a&gt; æ„å»º NSG å›¾&lt;/h2&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808230131.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç®—æ³•æ˜¯ä¸€ä¸ªåŸºäº GPU çš„è¿‘é‚»æœç´¢å›¾ï¼ˆNSWï¼ŒNavigable Small World Graphï¼‰æ„å»ºç®—æ³•ã€‚è¯¥ç®—æ³•æ—¨åœ¨é€šè¿‡å¹³è¡Œå¤„ç†æ¥æ„å»ºä¸€ä¸ªåŒ…å«ç‚¹é›†åˆçš„è¿‘é‚»å›¾ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„åº¦æ•°åœ¨æŒ‡å®šçš„æœ€å°åº¦æ•° (d_{min}) å’Œæœ€å¤§åº¦æ•° (d_{max}) ä¹‹é—´ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;h3 id=&#34;è¾“å…¥&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è¾“å…¥&#34;&gt;#&lt;/a&gt; è¾“å…¥ï¼š&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;P&lt;/strong&gt;: ä¸€ä¸ªç‚¹çš„é›†åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;(d_{min})&lt;/strong&gt;: å›¾ä¸­èŠ‚ç‚¹çš„æœ€å°åº¦æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;(d_{max})&lt;/strong&gt;: å›¾ä¸­èŠ‚ç‚¹çš„æœ€å¤§åº¦æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¾“å‡º&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è¾“å‡º&#34;&gt;#&lt;/a&gt; è¾“å‡ºï¼š&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;G&lt;/strong&gt;: ä¸€ä¸ªè¿‘é‚»å›¾ (G = (V, E))ï¼ŒåŒ…å«èŠ‚ç‚¹é›† (V) å’Œè¾¹é›† (E)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ­¥éª¤&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ­¥éª¤&#34;&gt;#&lt;/a&gt; æ­¥éª¤ï¼š&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ’åˆ†ç‚¹é›†åˆ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å°†ç‚¹é›†åˆ (P) åˆ’åˆ†ä¸ºäº’ä¸ç›¸äº¤çš„å­é›† (P_0, P_1, \ldots, P_t)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹åŒ–å›¾å­é›†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¹¶è¡Œï¼ˆè·¨ GPU å—ï¼‰åˆå§‹åŒ–æ¯ä¸ªåˆ’åˆ† (P_i) çš„ç©ºå›¾å­é›† (G_i)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±€éƒ¨é‚»å±…æœç´¢å’Œæ›´æ–°&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¯¹äºåˆ’åˆ† (P_i) ä¸­çš„æ¯ä¸ªç‚¹ (v_{ij})ï¼š
&lt;ul&gt;
&lt;li&gt;åœ¨å±€éƒ¨å›¾å­é›† (G_i) ä¸­æ‰¾åˆ°åˆå§‹é‚»å±… (v_{ij}.N) å’Œ (v_{ij}.N&#39;)ï¼Œç¡®ä¿åº¦æ•°ä¸å°‘äº (d_{min})ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº (v_{ij}) çš„æ¯ä¸ªé‚»å±… (u_{ij})ï¼š
&lt;ul&gt;
&lt;li&gt;åœ¨å—å†…å¹¶è¡Œï¼Œå°† (v_{ij}) æ·»åŠ åˆ° (u_{ij}) çš„é‚»å±…ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€é‚»å±…æœç´¢å’Œæ›´æ–°&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¯¹äºæ¯ä¸ªåˆ’åˆ† (i) ä» 1 åˆ° (t)ï¼š
&lt;ul&gt;
&lt;li&gt;åˆå§‹åŒ–ç©ºè¾¹é›† (E) å’Œç´¢å¼•é›† (I)ã€‚&lt;/li&gt;
&lt;li&gt;å¹¶è¡Œï¼ˆè·¨ GPU å—ï¼‰å¤„ç† (G_i) ä¸­çš„æ¯ä¸ªç‚¹ (v_{ij})ï¼š
&lt;ul&gt;
&lt;li&gt;æ›´æ–° (v_{ij}.N)ï¼Œé€šè¿‡æœç´¢å…¨å±€å›¾ (G_0) ç¡®ä¿åº¦æ•°ä¸å°‘äº (d_{min})ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å—å†…å¹¶è¡Œï¼Œå°† (v_{ij}.N) ä¸ (v_{ij}.N&#39;) åˆå¹¶ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº (v_{ij}) çš„æ¯ä¸ªé‚»å±… (u_{ij})ï¼š
&lt;ul&gt;
&lt;li&gt;åœ¨å—å†…å¹¶è¡Œï¼Œå°†è¾¹ ((u_{ij} \rightarrow v_{ij}, \delta (u_{ij}, v_{ij}))) æ·»åŠ åˆ° (E) ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¹¶è¡Œï¼ˆè·¨ GPU å—ï¼‰æ‰§è¡Œ gather-scatter æ“ä½œä»¥æ›´æ–° (E) å’Œ (I)ã€‚&lt;/li&gt;
&lt;li&gt;å¹¶è¡Œï¼ˆè·¨å’Œå—å†…ï¼‰æ›´æ–° (u_{ij}) çš„é‚»å±…ï¼ŒåŒ…å«ä» (E) ä¸­æ”¶é›†çš„æ–°è¾¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›æœ€ç»ˆå›¾&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è¿”å›å…¨å±€å›¾ (G_0)ï¼Œå®ƒç°åœ¨è¡¨ç¤ºåŒ…å«æ›´æ–°åçš„è¾¹å’Œé‚»å±…çš„å®Œæ•´è¿‘é‚»å›¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æ€»ç»“&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ€»ç»“&#34;&gt;#&lt;/a&gt; æ€»ç»“ï¼š&lt;/h3&gt;
&lt;p&gt;è¯¥ç®—æ³•æœ‰æ•ˆåœ°åˆ©ç”¨ GPU çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›å¯¹ç‚¹é›†è¿›è¡Œåˆ’åˆ†ã€æ‰§è¡Œå±€éƒ¨å’Œå…¨å±€é‚»å±…æœç´¢ï¼Œå¹¶æ›´æ–°å›¾ç»“æ„ã€‚è¿™ç§æ–¹æ³•ç¡®ä¿åœ¨æ„å»ºè¿‘é‚»å›¾çš„åŒæ—¶ç»´æŒèŠ‚ç‚¹åº¦æ•°çš„çº¦æŸ (d_{min}) å’Œ (d_{max})ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å…³é”®æ¦‚å¿µ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å…³é”®æ¦‚å¿µ&#34;&gt;#&lt;/a&gt; å…³é”®æ¦‚å¿µï¼š&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¹¶è¡Œå¤„ç†&lt;/strong&gt;ï¼šåˆ©ç”¨ GPU å—å’Œçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œæ“ä½œï¼ŒåŠ é€Ÿè®¡ç®—è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‚»å±…æœç´¢&lt;/strong&gt;ï¼šä¸ºæ¯ä¸ªç‚¹æ‰¾åˆ°å¹¶æ›´æ–°é‚»å±…ä»¥æ„å»ºå›¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Gather-Scatter æ“ä½œ&lt;/strong&gt;ï¼šä¸€ç§é«˜æ•ˆåˆ†å¸ƒå’Œæ”¶é›†æ•°æ®çš„å¹¶è¡ŒæŠ€æœ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åå‘è¾¹æ›´æ–°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#åå‘è¾¹æ›´æ–°&#34;&gt;#&lt;/a&gt; åå‘è¾¹æ›´æ–°&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å‰å‘è¾¹&lt;/strong&gt;ï¼šu å…ˆæ’å…¥ï¼Œv åæ’å…¥ï¼Œv å‘å‡º knn æœç´¢ï¼Œv-&amp;gt;u æ˜¯å‰å‘è¾¹&lt;br /&gt;
 ** åå‘è¾¹ï¼š**v å…ˆæ’å…¥ï¼Œu åæ’å…¥ï¼Œu å‘å‡º knn æœç´¢ï¼Œv-&amp;gt;u æ˜¯åå‘è¾¹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åˆå¹¶å­å›¾æ—¶ï¼Œç®—æ³• 12-14 è¡Œï¼Œæ›´æ–°äº†å‰å‘è¾¹ï¼Œä½†æ˜¯åå‘è¾¹æ›´æ–°æ—¶å¯èƒ½ä¸¤ä¸ª vij åŒæ—¶æœç´¢åˆ°ä¸€ä¸ªç‚¹ uï¼Œæ‰€ä»¥å…ˆæŠŠè·ç¦»è®°å½•åˆ° CSR è¡¨ä¸­&lt;br /&gt;
 [[åŒè°ƒæ’åº]]&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808230210.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;fast-k-nn-graph-construction-by-gpu-based-nn-descent&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#fast-k-nn-graph-construction-by-gpu-based-nn-descent&#34;&gt;#&lt;/a&gt; &lt;strong&gt;Fast k-NN graph construction by GPU based NN-Descent&lt;/strong&gt;&lt;/h1&gt;
</content>
        <category term="ANNS" scheme="https://yyuuz.github.io/categories/ANNS/" />
        <category term="ANNS/GPU" scheme="https://yyuuz.github.io/tags/ANNS-GPU/" />
        <category term="ANNS/ç´¢å¼•" scheme="https://yyuuz.github.io/tags/ANNS-%E7%B4%A2%E5%BC%95/" />
        <category term="HNSW" scheme="https://yyuuz.github.io/tags/HNSW/" />
        <updated>2024-08-08T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>https://yyuuz.github.io/2024/08/01/ANNS/Product%20Quantization/</id>
        <title>Product Quantization</title>
        <link rel="alternate" href="https://yyuuz.github.io/2024/08/01/ANNS/Product%20Quantization/"/>
        <content type="html">&lt;h2 id=&#34;åˆ†æ²»-quantization&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#åˆ†æ²»-quantization&#34;&gt;#&lt;/a&gt; åˆ†æ²» Quantization&lt;/h2&gt;
&lt;p&gt;PQ ç®—æ³•æŠŠ D ç»´å‘é‡åˆ†æˆ m ç»„ï¼Œ æ¯ç»„è¿›è¡Œ Kmeans èšç±»ç®—æ³•&lt;br /&gt;
å¸¦æ¥çš„å¥½å¤„&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;m ç»„å­å‘é‡çš„ Kmeans ç®—æ³•å¯ä»¥å¹¶è¡Œæ±‚è§£&lt;/li&gt;
&lt;li&gt;è¡¨ç¤ºç©ºé—´å¢å¤§ï¼Œ K çš„ m æ¬¡æ–¹&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å›¾ç¤ºpqç®—æ³•ç”Ÿæˆç æœ¬ä¸é‡åŒ–çš„è¿‡ç¨‹&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å›¾ç¤ºpqç®—æ³•ç”Ÿæˆç æœ¬ä¸é‡åŒ–çš„è¿‡ç¨‹&#34;&gt;#&lt;/a&gt; å›¾ç¤º PQ ç®—æ³•ç”Ÿæˆç æœ¬ä¸é‡åŒ–çš„è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808225855.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;SDC çš„è®¡ç®—æµç¤ºæ„å›¾&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808225902.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ADC çš„è®¡ç®—æµç¨‹ ç¤ºæ„å›¾&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808225909.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;SDC ä¸ ADC çš„æ•´ä½“å¤æ‚åº¦ä¸º O (N*m)ï¼Œ æ­¤æ—¶çš„è¿‘é‚»è®¡ç®—æ˜¯å¯¹æ•´ä½“çš„ N æ¥è®¡ç®—ï¼Œå®é™…ä¸­çš„ N åœ¨ç°å®åº”ç”¨ä¸­å¯èƒ½åœ¨åƒä¸‡é‡çº§ä»¥ä¸Šï¼Œ è™½ç„¶ç›¸è¾ƒäºæš´åŠ›è®¡ç®—å·²ç»å‡å°‘äº†è®¡ç®—é‡ï¼Œ ä½†è®¡ç®—é‡ä¾ç„¶å¾ˆå¤§ å¹¶ä¸å®ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;IVFPQ&lt;/strong&gt;&lt;br /&gt;
 æ‰¾ query çš„ topk æœ€è¿‘é‚»ï¼Œ ä¸ç”¨å¯¹æ•´ä¸ªæ•°æ®é›† N åšè®¡ç®—ï¼Œ åªéœ€è¦å¯¹ â€œæœ‰æ½œåŠ›â€ çš„å€™é€‰è¿›è¡Œè®¡ç®—ï¼Œ å¯ä»¥é€šè¿‡èšç±»çš„æ–¹å¼ï¼Œ å…ˆæ‰¾åˆ° top çš„ clusterï¼Œ ç„¶åå¯¹ cluster å†…çš„æ•°æ®ç‚¹ä¸€æ¬¡è®¡ç®—è·ç¦»&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;coarse quantizerï¼Œç²—ç²’åº¦é‡åŒ–å™¨ï¼Œåœ¨åŸå§‹çš„å‘é‡ç©ºé—´ä¸­ï¼ŒåŸºäº kmeans èšç±»å‡º k&#39; ä¸ªç°‡ cluster, k&#39; çš„å¤§å°ä¸€èˆ¬ä¸º sqrt (n),&lt;/li&gt;
&lt;li&gt;å®ç”¨ PQ å¯¹ cluster å†…çš„æ•°æ®ç‚¹è¿›è¡Œé‡åŒ–ï¼ŒPQ å¹¶ä¸æ˜¯ç›´æ¥åœ¨åŸå§‹æ•°æ®ä¸Šåšï¼Œè€Œæ˜¯ç»è¿‡ç¬¬ 1 å±‚é‡åŒ–åï¼Œè®¡ç®—å‡ºæ¯ä¸ªæ•°æ®ä¸å…¶é‡åŒ–ä¸­å¿ƒçš„æ®‹å·®åï¼Œå¯¹è¿™ä¸ªæ®‹å·®æ•°æ®é›†è¿›è¡Œ PQ é‡åŒ–ã€‚ç”¨ PQ å¤„ç†æ®‹å·®ï¼Œè€Œä¸æ˜¯åŸå§‹æ•°æ®çš„åŸå› æ˜¯æ®‹å·®çš„æ–¹å·®æˆ–è€…èƒ½é‡æ¯”åŸå§‹æ•°æ®çš„æ–¹å·®æˆ–è€…èƒ½é‡è¦å°&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808225916.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;query æŸ¥è¯¢ topk è¿‘é‚»æ—¶ï¼Œ é€‰å®šçš„ç²—èšç±»ä¸­å¿ƒä¸ä¸€å®šæ˜¯ 1 ä¸ªï¼Œ å¯ä»¥æ˜¯å¤šä¸ªï¼Œ æ¯”å¦‚ k&#39;&#39;, æœ´ç´ çš„ ADC ç®—æ³•çš„å¤æ‚åº¦æ˜¯ O (nÃ—m)ï¼Œè€Œ IVFADC ç®—æ³•çš„å¤æ‚åº¦ä¼šé™ä½ä¸º O ((NÃ—k&#39;&#39;/k&#39;)Ã—m)ã€‚&lt;/p&gt;
</content>
        <category term="ANNS" scheme="https://yyuuz.github.io/categories/ANNS/" />
        <category term="ANNS" scheme="https://yyuuz.github.io/tags/ANNS/" />
        <updated>2024-07-31T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>https://yyuuz.github.io/2024/08/01/ANNS/SONG/</id>
        <title>SONG</title>
        <link rel="alternate" href="https://yyuuz.github.io/2024/08/01/ANNS/SONG/"/>
        <content type="html">&lt;p&gt;SONG: Approximate Nearest Neighbor Search on GPU&lt;/p&gt;
&lt;h1 id=&#34;åŸannsæœç´¢è¿‡ç¨‹&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#åŸannsæœç´¢è¿‡ç¨‹&#34;&gt;#&lt;/a&gt; åŸ ANNS æœç´¢è¿‡ç¨‹&lt;/h1&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240809121502.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ç»´æŠ¤ä¸‰ä¸ªæ•°æ®ç»“æ„ q: å€™é€‰é›† topk: ç»“æœé›† visited: å·²è®¿é—®èŠ‚ç‚¹&lt;/p&gt;
&lt;h1 id=&#34;songç³»ç»Ÿ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#songç³»ç»Ÿ&#34;&gt;#&lt;/a&gt; SONG ç³»ç»Ÿ&lt;/h1&gt;
&lt;p&gt;å°†ä¸Šè¿°ç®—æ³•å…¨éƒ¨è¿ç§»åˆ°äº† GPU ä¸­æ¥è¿è¡Œã€‚å¦‚å›¾æ‰€ç¤ºä¸º SONG ç³»ç»Ÿçš„å¤„ç†æµç¨‹æ¢—æ¦‚ã€‚åœ¨æ¯è½®è¿­ä»£ä¸­ï¼Œé¦–å…ˆå°†ç”¨äºæ‹“å±•çš„ç»“ç‚¹ï¼ˆå³éœ€è¦è®¡ç®—è·ç¦»çš„ç»“ç‚¹ï¼‰ä» GPU çš„ Global memory ä¸­å­˜å‚¨çš„å›¾æ•°æ®ä¸­å¤åˆ¶åˆ°å…±äº«å†…å­˜ä¸­ï¼ˆCandidate Locatingï¼‰ï¼Œéšåï¼Œå¤šä¸ª GPU ä¸­çš„ warpï¼ˆ32 ä¸ªçº¿ç¨‹ï¼‰å¹¶è¡Œåœ°è®¡ç®—è¿™äº›ç»“ç‚¹åˆ°æŸ¥è¯¢ç‚¹çš„è·ç¦»ï¼ˆBulk Distance Computationï¼‰ï¼Œå¹¶å°†è®¡ç®—å¾—åˆ°çš„ç»“æœå­˜åˆ°å…±äº«å†…å­˜ä¸­ã€‚æœ€åï¼Œä¸€ä¸ª warp ä¸­çš„å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨è®¡ç®—å¾—åˆ°çš„è·ç¦»æ•°å€¼ä¿®æ”¹ç®—æ³•ä¸­æåˆ°çš„ qï¼Œtopkï¼Œvisited ä¸‰ä¸ªæ•°æ®ç»“æ„ã€‚&lt;br /&gt;
&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240809121525.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;ä¼˜åŒ–&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ä¼˜åŒ–&#34;&gt;#&lt;/a&gt; ä¼˜åŒ–&lt;/h1&gt;
&lt;h2 id=&#34;å›ºå®šç‚¹çš„åº¦æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å›ºå®šç‚¹çš„åº¦æ•°&#34;&gt;#&lt;/a&gt; å›ºå®šç‚¹çš„åº¦æ•°&lt;/h2&gt;
&lt;p&gt;æ›´å¥½å¯»å€&lt;/p&gt;
&lt;h2 id=&#34;bloom-filter&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#bloom-filter&#34;&gt;#&lt;/a&gt; [[Bloom filter]]&lt;/h2&gt;
&lt;p&gt;è®¿é—®åˆ—è¡¨ä¸å¿…ç²¾ç¡®å›ç­” â€”â€” å‡é˜³æ€§æ˜¯å¯ä»¥å®¹å¿çš„ï¼ˆ å·²è®¿é—®å‘ŠçŸ¥æˆ‘ä»¬æŸä¸ªå…ƒç´ å·²è¢«è®¿é—®ï¼Œä½†å®é™…ä¸Šå¹¶æ²¡æœ‰ ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;æœ‰ç•Œä¼˜å…ˆé˜Ÿåˆ—&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æœ‰ç•Œä¼˜å…ˆé˜Ÿåˆ—&#34;&gt;#&lt;/a&gt; æœ‰ç•Œä¼˜å…ˆé˜Ÿåˆ—&lt;/h2&gt;
&lt;p&gt;åªéœ€ç»´æŠ¤ä¼˜å…ˆé˜Ÿåˆ—å‰ K ä¸ªï¼Œå®ç°äº†å¯¹ç§°æœ€å° - æœ€å¤§å †çš„ GPU ç‰ˆæœ¬&lt;br /&gt;
&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240809121536.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;é€‰æ‹©æ€§æ’å…¥ä¼˜åŒ–&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#é€‰æ‹©æ€§æ’å…¥ä¼˜åŒ–&#34;&gt;#&lt;/a&gt; é€‰æ‹©æ€§æ’å…¥ä¼˜åŒ–&lt;/h2&gt;
&lt;p&gt;å‡å°‘å“ˆå¸Œè¡¨å’Œå¸ƒéš†è¿‡æ»¤å™¨çš„æ’å…¥ä»¥å‡å°‘å†…å­˜æ¶ˆè€— åœ¨æ’å…¥ä¹‹å‰è¿›è¡Œé€‰æ‹©ï¼šè¿‡æ»¤æ‰æ‰€æœ‰ä¸å‰ K ä¸ªå…ƒç´ çš„è·ç¦»è¾ƒå¤§çš„é¡¶ç‚¹ â€”â€” åªæœ‰å½“ä¸€ä¸ªé¡¶ç‚¹ä½äºå½“å‰ä¸æŸ¥è¯¢ç‚¹è·ç¦»æœ€è¿‘çš„å‰ K ä¸ªé¡¶ç‚¹ä¸­æ—¶ï¼Œå®ƒæ‰ä¼šè¢«æ ‡è®°ä¸ºå·²è®¿é—®å¹¶æ¨å…¥ q ä¸­&lt;/p&gt;
&lt;h2 id=&#34;è®¿é—®åˆ é™¤ä¼˜åŒ–&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è®¿é—®åˆ é™¤ä¼˜åŒ–&#34;&gt;#&lt;/a&gt; è®¿é—®åˆ é™¤ä¼˜åŒ–&lt;/h2&gt;
&lt;p&gt;å½“ä¸€ä¸ªé¡¶ç‚¹ä»ä¼˜å…ˆé˜Ÿåˆ— q ä¸­æå–å¹¶å¤„ç†åï¼Œå¦‚æœè¯¥é¡¶ç‚¹æ²¡æœ‰æ›´æ–° topkï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ä»è®¿é—®è¿‡çš„åˆ—è¡¨ä¸­åˆ é™¤ã€‚åŒæ ·ï¼Œå½“ topk è¢«æ›´æ–°æ—¶ï¼Œå¼¹å‡ºçš„é¡¶ç‚¹ä¹Ÿå¯ä»¥ä»è®¿é—®è¿‡çš„å“ˆå¸Œè¡¨ä¸­åˆ é™¤ã€‚ å½“åº”ç”¨è®¿é—®åˆ é™¤ä¼˜åŒ–æ—¶ï¼Œå“ˆå¸Œè¡¨è®¿é—®è¿‡çš„é¡¶ç‚¹æ°å¥½æ˜¯ qï¼ˆå¤§å°æœ€å¤šä¸º Kï¼‰å’Œ topkï¼ˆå¤§å°æœ€å¤šä¸º Kï¼‰çš„å¹¶é›†ã€‚å› æ­¤ï¼Œè®¿é—®è¿‡çš„é¡¶ç‚¹çš„å¤§å°è¢«é™åˆ¶åœ¨ 2K ä¹‹å†…ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è·ç¦»è®¡ç®—&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è·ç¦»è®¡ç®—&#34;&gt;#&lt;/a&gt; è·ç¦»è®¡ç®—&lt;/h2&gt;
&lt;p&gt;æ¯ä¸ªçº¿ç¨‹è´Ÿè´£è®¡ç®—ä¸€ä¸ªç»´åº¦å­é›†çš„éƒ¨åˆ†è·ç¦»ã€‚ 32 ä¸ªçº¿ç¨‹è¢«ç»„ç»‡åœ¨ä¸€èµ·ä»¥è®¿é—®è¿ç»­çš„å†…å­˜åœ°å€ã€‚å¦‚æœæˆ‘ä»¬å¹¶å‘å¤„ç†å€™é€‰è€…ï¼Œåˆ™æ¯ä¸ªçº¿ç¨‹çš„å†…è®¿é—®æ¨¡å¼æ˜¯ç‹¬ç«‹çš„ â€”â€” å°†äº§ç”Ÿæ›´å¤šçš„ç¼“å­˜ missã€‚&lt;/p&gt;
&lt;h2 id=&#34;è¶…å‡ºgpuå†…å­˜æ•°æ®é›†çš„é—®é¢˜&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è¶…å‡ºgpuå†…å­˜æ•°æ®é›†çš„é—®é¢˜&#34;&gt;#&lt;/a&gt; è¶…å‡º GPU å†…å­˜æ•°æ®é›†çš„é—®é¢˜&lt;/h2&gt;
&lt;h3 id=&#34;ä½¿ç”¨éšæœºå“ˆå¸ŒæŠ€æœ¯&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ä½¿ç”¨éšæœºå“ˆå¸ŒæŠ€æœ¯&#34;&gt;#&lt;/a&gt; ä½¿ç”¨éšæœºå“ˆå¸ŒæŠ€æœ¯&lt;/h3&gt;
&lt;p&gt;ä¸ºæ­¤ï¼Œé‡‡ç”¨äº†éšæœºå“ˆå¸ŒæŠ€æœ¯ï¼Œå°†é«˜ç»´æ•°æ®ç¼–ç ä¸ºä½å‘é‡ã€‚è¿™æ ·ï¼Œå“ˆå¸Œåçš„æ•°æ®é›†å¯ä»¥é€‚åº” GPU å†…å­˜ï¼Œå¹¶åœ¨ä½ç»´ä½ä¸Šè®¡ç®—è·ç¦»ã€‚&lt;/p&gt;
&lt;h3 id=&#34;1-bitéšæœºæŠ•å½±&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#1-bitéšæœºæŠ•å½±&#34;&gt;#&lt;/a&gt; 1-bit éšæœºæŠ•å½±&lt;/h3&gt;
&lt;p&gt;åœ¨ä¼—å¤šæ¦‚ç‡å“ˆå¸Œæ–¹æ³•ä¸­ï¼Œæœ¬æ–‡é‡ç‚¹ä»‹ç»äº†ä¸€ç§åä¸º â€œ1-bit éšæœºæŠ•å½±â€ çš„æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•é€šè¿‡ç”Ÿæˆä¸€ä¸ªéšæœºå‘é‡ r ï¼Œå¹¶è®¡ç®—æ•°æ®å‘é‡ u å’Œ v åœ¨ r ä¸Šçš„æŠ•å½±ç¬¦å·æ¥è¿›è¡Œå“ˆå¸Œã€‚å…¬å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34; display=&#34;block&#34;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mtext&gt;â¡&lt;/mtext&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;g&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mo&gt;â‹…&lt;/mo&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;g&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mo&gt;â‹…&lt;/mo&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;âˆ’&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi&gt;Î¸&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;Ï€&lt;/mi&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;Prâ¡(sgn(uâ‹…r)=sgn(vâ‹…r))= 1 - \frac{\theta(u,v)}{\pi} 
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34; style=&#34;margin-right:0.13889em;&#34;&gt;P&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;â¡&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34; style=&#34;margin-right:0.03588em;&#34;&gt;g&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;â‹…&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34; style=&#34;margin-right:0.03588em;&#34;&gt;g&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;â‹…&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.7278em;vertical-align:-0.0833em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;âˆ’&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:2.113em;vertical-align:-0.686em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.427em;&#34;&gt;&lt;span style=&#34;top:-2.314em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathnormal&#34; style=&#34;margin-right:0.03588em;&#34;&gt;Ï€&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.677em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathnormal&#34; style=&#34;margin-right:0.02778em;&#34;&gt;Î¸&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.1667em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathnormal&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.686em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ï¼ŒÎ¸(u,v) æ˜¯å‘é‡ u å’Œ v ä¹‹é—´çš„è§’åº¦ã€‚å¦‚æœ r çš„æ¡ç›®ä»ç‹¬ç«‹åŒåˆ†å¸ƒçš„æŸ¯è¥¿åˆ†å¸ƒä¸­é‡‡æ ·ï¼Œè€Œä¸æ˜¯æ­£æ€åˆ†å¸ƒï¼Œåˆ™è¿™ç§ç¢°æ’æ¦‚ç‡ä¸ Ï‡2 ç›¸ä¼¼åº¦å¯†åˆ‡ç›¸å…³ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å“ˆå¸Œåçš„æ•°æ®å¤„ç†&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å“ˆå¸Œåçš„æ•°æ®å¤„ç†&#34;&gt;#&lt;/a&gt; å“ˆå¸Œåçš„æ•°æ®å¤„ç†&lt;/h3&gt;
&lt;p&gt;å¯¹äºæ¯ä¸ªæ•°æ®ç‚¹ï¼Œæ˜ å°„åˆ°ä¸€ä¸ª h ä½å‘é‡ä¸­ã€‚ä½å‘é‡ä¹‹é—´çš„æ±‰æ˜è·ç¦»æ˜¯åŸå§‹æ•°æ®ä¸­ç›¸ä¼¼æ€§çš„è‰¯å¥½ä¼°è®¡ã€‚åœ¨å®ç°ä¸­ï¼Œ h å¯ä»¥è®¾ç½®ä¸º 32 çš„å€æ•°ï¼Œä»¥ä¾¿å°†ä½å‘é‡å­˜å‚¨ä¸ºå‡ ä¸ª 32 ä½æ— ç¬¦å·æ•´æ•°ã€‚è¿™æ ·ï¼Œä¸€ä¸ª h ä½å‘é‡çš„å†…å­˜å ç”¨ç­‰åŒäº h/32 ä¸ªå•ç²¾åº¦æµ®ç‚¹å€¼çš„ç©ºé—´ã€‚&lt;/p&gt;
</content>
        <category term="ANNS" scheme="https://yyuuz.github.io/categories/ANNS/" />
        <category term="ANNS/æœç´¢" scheme="https://yyuuz.github.io/tags/ANNS-%E6%90%9C%E7%B4%A2/" />
        <category term="ANNS/GPU" scheme="https://yyuuz.github.io/tags/ANNS-GPU/" />
        <updated>2024-07-31T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>https://yyuuz.github.io/2024/08/01/ANNS/DF-GAS_%20a%20Distributed%20FPGA-as-a-Service%20Architecture%20towards%20Billion-Scale%20Graph-based%20Approximate%20Nearest%20Neighbor%20Search/</id>
        <title>DF-GAS_ a Distributed FPGA-as-a-Service Architecture towards Billion-Scale Graph-based Approximate Nearest Neighbor Search</title>
        <link rel="alternate" href="https://yyuuz.github.io/2024/08/01/ANNS/DF-GAS_%20a%20Distributed%20FPGA-as-a-Service%20Architecture%20towards%20Billion-Scale%20Graph-based%20Approximate%20Nearest%20Neighbor%20Search/"/>
        <content type="html">&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808225752.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;h1 id=&#34;åŠ¨æœº&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#åŠ¨æœº&#34;&gt;#&lt;/a&gt; åŠ¨æœº&lt;/h1&gt;
&lt;p&gt;CPU: ç»†ç²’åº¦å†…å­˜è®¿é—®ï¼Œçº¿ç¨‹æ•°ä¸è¶³&lt;br /&gt;
 GPU: ç»†ç²’åº¦å†…å­˜è®¿é—®ï¼Œå†…å­˜å®¹é‡å°ï¼Œç¼ºä¹æµæ°´çº¿å¹¶è¡Œæ€§ï¼ˆ7ï¼‰&lt;/p&gt;
&lt;h1 id=&#34;æŒ‘æˆ˜&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æŒ‘æˆ˜&#34;&gt;#&lt;/a&gt; æŒ‘æˆ˜&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;éšæœºç»†ç²’åº¦è®¿é—®&lt;/li&gt;
&lt;li&gt;é•¿æ—¶é—´è¿œç¨‹è®¿é—®å»¶è¿Ÿå’Œæ²‰é‡çš„é€šä¿¡å¼€é”€&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;è®¾è®¡&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è®¾è®¡&#34;&gt;#&lt;/a&gt; è®¾è®¡&lt;/h1&gt;
&lt;h3 id=&#34;å†…å­˜è®¿é—®å¼•æ“memory-access-engines-maes&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å†…å­˜è®¿é—®å¼•æ“memory-access-engines-maes&#34;&gt;#&lt;/a&gt; å†…å­˜è®¿é—®å¼•æ“ï¼ˆMemory Access Engines, MAEsï¼‰&lt;/h3&gt;
&lt;h4 id=&#34;ä¸»è¦åŠŸèƒ½&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ä¸»è¦åŠŸèƒ½&#34;&gt;#&lt;/a&gt; ä¸»è¦åŠŸèƒ½&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹å¾æ‰“åŒ…å†…å­˜è®¿é—®ï¼ˆFeature-Packing Memory Accessï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;MAEs é€šè¿‡æ‰“åŒ…å¤šä¸ªç‰¹å¾è¯·æ±‚æ¥æé«˜å†…å­˜è®¿é—®çš„æ•ˆç‡ï¼Œå¢åŠ å†…å­˜å¸¦å®½åˆ©ç”¨ç‡ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒå°†å¤šä¸ªå°è§„æ¨¡çš„å†…å­˜è®¿é—®è¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªå¤§è§„æ¨¡çš„è¯·æ±‚ï¼Œä»è€Œå‡å°‘å†…å­˜è®¿é—®çš„å¼€é”€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°å’Œè¿œç¨‹å†…å­˜è®¿é—®ä¼˜åŒ–&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;MAEs ä¼˜åŒ–äº†æœ¬åœ°å†…å­˜ï¼ˆå¦‚ DDR å’Œ HBMï¼‰å’Œè¿œç¨‹å†…å­˜çš„è®¿é—®ï¼Œé€šè¿‡é¢„å–å’Œå»¶è¿Ÿå¤„ç†ç­‰æŠ€æœ¯å‡å°‘è®¿é—®å»¶è¿Ÿï¼Œæé«˜æ•°æ®ä¼ è¾“æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®é¢„å–å’Œå»¶è¿Ÿå¤„ç†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;MAEs å®ç°äº†æœ¬åœ°æ•°æ®é¢„å–æŠ€æœ¯ï¼Œåœ¨æ‰§è¡Œå½“å‰è¿­ä»£æ—¶é¢„å–ä¸‹ä¸€è¿­ä»£æ‰€éœ€çš„æ•°æ®ï¼Œä»è€Œéšè—å†…å­˜è®¿é—®å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;li&gt;MAEs è¿˜å®ç°äº†è¿œç¨‹æ•°æ®çš„å»¶è¿Ÿè®¿é—®ï¼Œé€šè¿‡åˆå¹¶å¤šä¸ªè¿œç¨‹è¯·æ±‚ï¼Œå‡å°‘è¿œç¨‹è®¿é—®çš„é¢‘ç‡å’Œå¼€é”€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å»é‡å’ŒåŒæ­¥&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;MAEs åŒ…å«å»é‡æ¨¡å—ï¼Œç¡®ä¿è®¿é—®çš„èŠ‚ç‚¹å’Œæ•°æ®ä¸é‡å¤ï¼Œä»è€Œæé«˜è®¡ç®—æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;MAEs è¿˜åŒ…æ‹¬åŒæ­¥æ¨¡å—ï¼Œç”¨äºåœ¨å¤šä¸ª FPGA èŠ‚ç‚¹ä¹‹é—´åŒæ­¥æ•°æ®å’ŒæŒ‡ä»¤ï¼Œç¡®ä¿åˆ†å¸ƒå¼è®¡ç®—çš„ä¸€è‡´æ€§å’ŒååŒå·¥ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;è®¾è®¡ç‰¹ç‚¹&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è®¾è®¡ç‰¹ç‚¹&#34;&gt;#&lt;/a&gt; è®¾è®¡ç‰¹ç‚¹&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸¤çº§æœªå®Œæˆè¯·æ±‚ç”Ÿæˆï¼ˆTwo-Level Outstanding Request Generationï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;é€šè¿‡åœ¨ç»†ç²’åº¦å’Œç²—ç²’åº¦ä¸¤ä¸ªå±‚æ¬¡ä¸Šåˆå¹¶æœªå®Œæˆçš„å†…å­˜è¯·æ±‚ï¼Œæé«˜å†…å­˜çº§å¹¶è¡Œæ€§å’Œå¸¦å®½åˆ©ç”¨ç‡ã€‚&lt;/li&gt;
&lt;li&gt;å°†ä¸€ä¸ª PE çš„æ‰€æœ‰èŠ‚ç‚¹è¯·æ±‚åˆå¹¶&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµæ°´çº¿ä¼˜åŒ–ï¼ˆPipeline Optimizationï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;é‡‡ç”¨ä»»åŠ¡çº§æµæ°´çº¿æŠ€æœ¯ï¼Œå°†å†…å­˜è®¿é—®ã€è·ç¦»è®¡ç®—ã€æ’åºç­‰æ“ä½œåˆ†è§£ä¸ºå¤šä¸ªå­ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œï¼Œä»è€Œå‡å°‘æ¯ä¸ªè¿­ä»£çš„æ€»å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°æ•°æ®é¢„å–ï¼ˆLocal Data Prefetchingï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åœ¨å½“å‰è¿­ä»£æœŸé—´é¢„å–ä¸‹ä¸€è¿­ä»£éœ€è¦çš„æ•°æ®ï¼Œé€šè¿‡è¿­ä»£é—´çš„æ•°æ®æ‰“åŒ…å‡å°‘å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;li&gt;ä»æœ¬åœ° top-k åˆ—è¡¨é¢„æµ‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿œç¨‹è®¿é—®ä¼˜åŒ–ï¼ˆRemote Access Optimizationï¼‰&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808225818.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒ…æ‹¬å»¶è¿Ÿè¿œç¨‹ç‰¹å¾è®¿é—®å’Œé¢„å–è¿œç¨‹é‚»å±…åˆ—è¡¨æŠ€æœ¯ï¼Œåˆ†åˆ«å‡å°‘è¿œç¨‹ç‰¹å¾è®¿é—®æ¬¡æ•°å’Œè¿œç¨‹è®¿é—®å»¶è¿Ÿï¼Œæé«˜è¿œç¨‹å†…å­˜è®¿é—®çš„æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;ï¼ˆaï¼‰skip æŒ‚èµ·è¿œç¨‹è®¿é—®è¯·æ±‚ç›´åˆ°é€šä¿¡é—´éš”&lt;/li&gt;
&lt;li&gt;(b)  è¯·æ±‚ä¸€ä¸ªè¿œç¨‹èŠ‚ç‚¹çš„é‚»å±…åˆ—è¡¨æ—¶ï¼Œå°†ä¼˜å…ˆé˜Ÿåˆ—ä¸­æ‰€æœ‰å±äºè¿™ä¸ªè¿œç¨‹èŠ‚ç‚¹çš„é‚»å±…åˆ—è¡¨éƒ½å–å›æ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;maesåœ¨df-gasæ¶æ„ä¸­çš„ä½ç½®&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#maesåœ¨df-gasæ¶æ„ä¸­çš„ä½ç½®&#34;&gt;#&lt;/a&gt; MAEs åœ¨ DF-GAS æ¶æ„ä¸­çš„ä½ç½®&lt;/h4&gt;
&lt;p&gt;åœ¨ DF-GAS æ¶æ„ä¸­ï¼Œæ¯ä¸ª FPGA èŠ‚ç‚¹å†…éƒ¨åŒ…å«å¤šä¸ª MAEsï¼Œæ¯ä¸ª MAE ç‹¬ç«‹ç®¡ç†å’Œä¼˜åŒ–å†…å­˜è®¿é—®ã€‚MAEs ä¸å¤šä¸ªå¤„ç†å•å…ƒï¼ˆPEsï¼‰ååŒå·¥ä½œï¼Œé€šè¿‡é«˜å¸¦å®½å†…å­˜ï¼ˆHBMï¼‰å’Œæœ¬åœ°å†…å­˜ï¼ˆDDRï¼‰è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œå¹¶é€šè¿‡ç½‘ç»œæ¥å£ä¸å…¶ä»– FPGA èŠ‚ç‚¹è¿›è¡Œé€šä¿¡ã€‚&lt;br /&gt;
ä»¥ä¸‹æ˜¯ DF-GAS æ¶æ„å›¾ä¸­ MAEs çš„ä½ç½®å’Œç»„æˆéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;------------------------------------------------
| FPGA Node                                     |
|----------------------------------------------|
|   -----------------------  ----------------   |
|  | MAE                   |  | PE            |  |
|  |  - Feature Packing    |  |  - Distance   |  |
|  |  - Prefetching        |  |    Compute    |  |
|  |  - Deduplication      |  |  - Sorting    |  |
|  -----------------------  ----------------   |
|   -----------------------  ----------------   |
|  | MAE                   |  | PE            |  |
|  |  - Feature Packing    |  |  - Distance   |  |
|  |  - Prefetching        |  |    Compute    |  |
|  |  - Deduplication      |  |  - Sorting    |  |
|  -----------------------  ----------------   |
|----------------------------------------------|
|  Network Interface                           |
------------------------------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;æ€»ç»“&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ€»ç»“&#34;&gt;#&lt;/a&gt; æ€»ç»“&lt;/h3&gt;
&lt;p&gt;MAEsï¼ˆå†…å­˜è®¿é—®å¼•æ“ï¼‰æ˜¯ DF-GAS æ¶æ„ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œé€šè¿‡ä¼˜åŒ–å†…å­˜è®¿é—®ï¼Œæé«˜å†…å­˜å¸¦å®½åˆ©ç”¨ç‡å’Œæ•°æ®ä¼ è¾“æ•ˆç‡ï¼Œä»è€Œæ˜¾è‘—æå‡ç³»ç»Ÿæ€§èƒ½ã€‚MAEs é€šè¿‡ç‰¹å¾æ‰“åŒ…ã€æ•°æ®é¢„å–ã€å»¶è¿Ÿå¤„ç†ç­‰æŠ€æœ¯ï¼Œç¡®ä¿åœ¨å¤§è§„æ¨¡æ•°æ®å¤„ç†ä»»åŠ¡ä¸­å®ç°é«˜æ•ˆçš„å†…å­˜è®¿é—®å’Œæ•°æ®ç®¡ç†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;peprocessing-element&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#peprocessing-element&#34;&gt;#&lt;/a&gt; PEï¼ˆProcessing Elementï¼‰&lt;/h3&gt;
&lt;h4 id=&#34;ä¸»è¦ç»„ä»¶&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ä¸»è¦ç»„ä»¶&#34;&gt;#&lt;/a&gt; ä¸»è¦ç»„ä»¶&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è·ç¦»è®¡ç®—å•å…ƒï¼ˆDistance Compute Unit, DCUï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼šè®¡ç®—æŸ¥è¯¢ç‚¹ä¸æ•°æ®é›†ä¸­ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°&lt;/strong&gt;ï¼šé‡‡ç”¨æµæ°´çº¿åŠ æ³•æ ‘ç»“æ„ï¼Œå®ç°æ•°æ®å¹¶è¡Œè®¡ç®—ã€‚æ¯ä¸ª DCU åŒ…å«å¤šä¸ªè®¡ç®—å•å…ƒï¼Œé€šè¿‡å¯„å­˜å™¨å’ŒåŠ æ³•æ ‘å°†è·ç¦»è®¡ç®—å¹¶è¡ŒåŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ° Top-K æ’åºå•å…ƒï¼ˆLocal Top-K Sorting Unit, LSUï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼šç»´æŠ¤å’Œæ›´æ–°æœ¬åœ° Top-K å€™é€‰ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°&lt;/strong&gt;ï¼šä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç»“æ„ï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°æ’å…¥å’Œåˆ é™¤å…ƒç´ ï¼Œä¿è¯åœ¨æ¯æ¬¡è¿­ä»£åï¼Œè·ç¦»æœ€å°çš„ Top-K ç‚¹ä¿ç•™åœ¨é˜Ÿåˆ—ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€ Top-K æ’åºå•å…ƒï¼ˆGlobal Top-K Sorting Unit, GSUï¼Œ å¯é€‰ï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼šå¤„ç†è·¨èŠ‚ç‚¹çš„ Top-K ç»“æœåˆå¹¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°&lt;/strong&gt;ï¼šåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„ Top-K ç»“æœéœ€è¦æœ€ç»ˆåˆå¹¶æˆå…¨å±€çš„ Top-K ç»“æœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶å™¨ï¼ˆControllerï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼šç®¡ç†å’Œåè°ƒ PE å†…éƒ¨å„ä¸ªæ¨¡å—ä¹‹é—´çš„æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°&lt;/strong&gt;ï¼šåŸºäº RISC-V å…¼å®¹çš„æŒ‡ä»¤é›†æ¶æ„ï¼Œèƒ½å¤Ÿçµæ´»é…ç½®å’Œè°ƒåº¦ PE çš„å·¥ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;peçš„å·¥ä½œæµç¨‹&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#peçš„å·¥ä½œæµç¨‹&#34;&gt;#&lt;/a&gt; PE çš„å·¥ä½œæµç¨‹&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŠ è½½ç‰¹å¾ï¼ˆFeature Loadingï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä»å†…å­˜ä¸­åŠ è½½å½“å‰è¿­ä»£éœ€è¦å¤„ç†çš„ç‰¹å¾å‘é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·ç¦»è®¡ç®—ï¼ˆDistance Calculationï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨è·ç¦»è®¡ç®—å•å…ƒï¼ˆDCUï¼‰è®¡ç®—æŸ¥è¯¢ç‚¹ä¸ç‰¹å¾å‘é‡ä¹‹é—´çš„è·ç¦»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´æ–° Top-Kï¼ˆTop-K Updateï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å°†è®¡ç®—å¾—åˆ°çš„è·ç¦»æ’å…¥åˆ°æœ¬åœ° Top-K æ’åºå•å…ƒï¼ˆLSUï¼‰ä¸­ï¼Œç»´æŠ¤ä¸€ä¸ªæœ‰åºçš„ Top-K åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿­ä»£å¤„ç†ï¼ˆIteration Processingï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ç»§ç»­ä¸‹ä¸€ä¸ªè¿­ä»£ï¼Œé‡å¤åŠ è½½ç‰¹å¾ã€è·ç¦»è®¡ç®—å’Œæ›´æ–° Top-K çš„è¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰è¿­ä»£å®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æœåˆå¹¶ï¼ˆResult Mergingï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œè¿˜éœ€è¦ä½¿ç”¨å…¨å±€ Top-K æ’åºå•å…ƒï¼ˆGSUï¼‰åˆå¹¶æ¥è‡ªä¸åŒèŠ‚ç‚¹çš„ Top-K ç»“æœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;è®¾è®¡ç»†èŠ‚&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è®¾è®¡ç»†èŠ‚&#34;&gt;#&lt;/a&gt; è®¾è®¡ç»†èŠ‚&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å¹¶è¡Œæ€§ï¼ˆData Parallelismï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;DCU é‡‡ç”¨æ•°æ®å¹¶è¡Œç»“æ„ï¼Œé€šè¿‡å¤šä¸ªè®¡ç®—å•å…ƒå¹¶è¡Œå¤„ç†å¤šä¸ªæ•°æ®ç‚¹ï¼Œæé«˜è®¡ç®—æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµæ°´çº¿å¹¶è¡Œæ€§ï¼ˆPipeline Parallelismï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;PE å†…éƒ¨å„ä¸ªæ“ä½œï¼ˆå¦‚ç‰¹å¾åŠ è½½ã€è·ç¦»è®¡ç®—ã€æ’åºç­‰ï¼‰é‡‡ç”¨æµæ°´çº¿å¹¶è¡Œæ–¹å¼ï¼Œè¿›ä¸€æ­¥å‡å°‘æ¯ä¸ªè¿­ä»£çš„æ€»å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé˜Ÿåˆ—ç»“æ„ï¼ˆPriority Queue Structureï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æœ¬åœ° Top-K æ’åºå•å…ƒï¼ˆLSUï¼‰ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç»“æ„ï¼Œç¡®ä¿èƒ½å¤Ÿé«˜æ•ˆåœ°ç»´æŠ¤å’Œæ›´æ–° Top-K å€™é€‰ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯æ‰©å±•æ€§ï¼ˆScalabilityï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;é€šè¿‡å¤šä¸ª PE å¹¶è¡Œå·¥ä½œï¼Œå¹¶ç»“åˆå†…å­˜è®¿é—®å¼•æ“ï¼ˆMAEsï¼‰ä¼˜åŒ–å†…å­˜è®¿é—®ï¼ŒDF-GAS æ¶æ„èƒ½å¤Ÿé«˜æ•ˆå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;peè®¾è®¡ç¤ºæ„å›¾&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#peè®¾è®¡ç¤ºæ„å›¾&#34;&gt;#&lt;/a&gt; PE è®¾è®¡ç¤ºæ„å›¾&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;------------------------------
|          PE                |
|----------------------------|
|  Controller                |
|  - RISC-V compatible ISA   |
|----------------------------|
|  Distance Compute Unit     |
|  - Data Parallel Structure |
|  - Pipelined Adder Tree    |
|----------------------------|
|  Local Top-K Sorting Unit  |
|  - Priority Queue Structure|
|----------------------------|
|  Global Top-K Sorting Unit | (Optional)
|  - Merging Results from    |
|    Different Nodes         |
------------------------------
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;æ€»ç»“-2&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ€»ç»“-2&#34;&gt;#&lt;/a&gt; æ€»ç»“&lt;/h3&gt;
&lt;p&gt;PEï¼ˆProcessing Elementï¼Œå¤„ç†å•å…ƒï¼‰åœ¨ DF-GAS æ¶æ„ä¸­è´Ÿè´£å…³é”®çš„è®¡ç®—ä»»åŠ¡ï¼ŒåŒ…æ‹¬è·ç¦»è®¡ç®—å’Œ Top-K æ’åºã€‚é€šè¿‡æ•°æ®å¹¶è¡Œå’Œæµæ°´çº¿å¹¶è¡ŒæŠ€æœ¯ï¼ŒPE èƒ½å¤Ÿé«˜æ•ˆåœ°æ‰§è¡Œè¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ä¸­çš„è®¡ç®—æ“ä½œï¼Œç¡®ä¿ç³»ç»Ÿåœ¨å¤„ç†å¤§è§„æ¨¡æ•°æ®é›†æ—¶å…·æœ‰é«˜æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚PE ä¸å†…å­˜è®¿é—®å¼•æ“ï¼ˆMAEsï¼‰ååŒå·¥ä½œï¼Œå®ç°é«˜æ•ˆçš„å†…å­˜è®¿é—®å’Œæ•°æ®å¤„ç†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è®¿é—®åˆ—è¡¨çš„ç¡¬ä»¶ä¼˜åŒ–hvr&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è®¿é—®åˆ—è¡¨çš„ç¡¬ä»¶ä¼˜åŒ–hvr&#34;&gt;#&lt;/a&gt; è®¿é—®åˆ—è¡¨çš„ç¡¬ä»¶ä¼˜åŒ–ï¼šHVR&lt;/h3&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; data-src=&#34;https://pichost-yu.oss-cn-wuhan-lr.aliyuncs.com/img/20240808225830.png&#34; alt=&#34;image.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;HVR åˆ©ç”¨ CRC-12 å‡½æ•° [45] ç”Ÿæˆå“ˆå¸Œé”®ï¼Œç”¨äºä» M æ§½å“ˆå¸Œè¡¨ä¸­è¯»å–å‡º M ä¸ªå€¼ã€‚å°†è¾“å…¥ Nid ä¸ M ä¸ªå€¼åŒæ—¶è¿›è¡Œæ¯”è¾ƒï¼Œä»¥ç”Ÿæˆè®¿é—®ä¿¡å·ã€‚å¦‚æœ Nid å°šæœªè¢«è®¿é—®ï¼Œåˆ™é€‰æ‹©é€»è¾‘æ ¹æ® M ä¸ªæœ‰æ•ˆä¿¡å·ç”Ÿæˆä¸‹ä¸€ä¸ªæ’å…¥ä½ç½®ï¼ˆæ§½ä½å·ï¼‰ï¼Œç„¶åå°† Nid æ’å…¥ç›®æ ‡æ§½ã€‚HVR åˆ©ç”¨äº† 8 ä¸ªå¸¦æœ‰ K = 1024 ä¸ªæ¡¶çš„åŒç«¯å£ BRAMs å’Œ M = 4 ä¸ªæ§½ï¼Œå°†æ‰€éœ€çš„èŠ¯ç‰‡å†…å­˜é™ä½åˆ° 32KBã€‚HVR é‡‡ç”¨åŒç¼“å†²æŠ€æœ¯æ¥éšè—åˆå§‹åŒ–çš„å»¶è¿Ÿï¼Œè¯¥å»¶è¿Ÿä¼šåœ¨æ¯æ¬¡æŸ¥è¯¢æ—¶å‘ç”Ÿã€‚æ­¤å¤–ï¼ŒHVR ä¸­æœç´¢å’Œæ’å…¥æ“ä½œçš„å»¶è¿Ÿå¤§çº¦ä¸ºæ¯ä¸ªèŠ‚ç‚¹ 2-3 ä¸ªå‘¨æœŸã€‚è¯„ä¼°ç»“æœæ˜¾ç¤ºï¼Œå¹³å‡å†²çªç‡çº¦ä¸º 0.1ï¼…ï¼Œå¯¼è‡´å‡ ä¹æ²¡æœ‰å»¶è¿Ÿå¼€é”€ï¼ˆâ‰¤0.05ï¼…ï¼‰ï¼Œå¹¶ä¸”æ²¡æœ‰å‡†ç¡®æ€§æŸå¤±ï¼Œå› ä¸ºå†²çªåªä¼šå¯¼è‡´å¤šä½™çš„è®¿é—®è€Œä¸ä¼šæ”¹å˜å›¾éå†è·¯å¾„ã€‚&lt;/p&gt;
</content>
        <category term="ANNS" scheme="https://yyuuz.github.io/categories/ANNS/" />
        <category term="ANNS/æœç´¢" scheme="https://yyuuz.github.io/tags/ANNS-%E6%90%9C%E7%B4%A2/" />
        <category term="ANNS/FPGA" scheme="https://yyuuz.github.io/tags/ANNS-FPGA/" />
        <updated>2024-07-31T16:00:00.000Z</updated>
    </entry>
</feed>
